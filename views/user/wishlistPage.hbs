<header class="header-area header-style-1">
    <div id="main-header-higlights" style="background-color:#ffffff; border:1px solid #ffffff; color:black"
        class="header-top header-top-ptb-1 d-none d-lg-block">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-3 col-lg-4">
                    <div style="color: #ffffff;" class="header-info">
                        <ul>
                            <li id="header-li-bg-clr">
                                <a style="color: black; font-weight:900;" href="/userHome">Home</a>
                            </li>
                            <li id="header-li-bg-clr"><a style="color: black; font-weight:900;"
                                    href="/userProductlist">Shop </a>
                            </li>
                            <li id="header-li-bg-clr">
                                <a style="color: black; font-weight:900;" href="/userAccount">Account</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-4">
                    <div class="text-center">
                        <div style="color: black;" id="news-flash" class="d-inline-block">
                            <ul>

                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-4">
                    <div class="header-info header-info-right">
                        <ul>

                            <div class="header-action-right">
                                <div class="header-action-2">
                                    <div class="header-action-icon-2">
                                        <a href="/wishlistPage">
                                            <img class="svgInject" alt="Evara"
                                                src="assets/imgs/theme/icons/icon-heart.svg">
                                            <span style="background-color: #ffffff; color:rgb(255, 255, 255)"
                                                class="pro-count "></span>
                                        </a>
                                    </div>
                                    <div class="header-action-icon-2">
                                        <a class="mini-cart-icon" href="/cart">
                                            <img alt="Evara" src="assets/imgs/theme/icons/icon-cart.svg">
                                            <span style="background-color: #ffffff; color:rgb(255, 255, 255)"
                                                class="pro-count #"></span>
                                        </a>

                                    </div>
                                </div>
                            </div>
                            {{#if this.userLogged}}
                            <div class="d-flex justify-content-right ml-4 mt-2">
                                <button style="background: transparent; border:none" onclick="logoutConfirmation()" type="button">
                                    <i style="color: #000000; font-size:x-large; " class="fa-solid fa-user"></i><i
                                        style="color: #000000; font-size:small"
                                        class="fa-solid fa-right-from-bracket"></i>
                                </button>
                            </div>
                            {{else}}
                            <li>
                                <div style="margin-left: 42%;" class="d-flex justify-content-right "></div>
                                <i class="fi-rs-user"></i><a style="color: #046963;" href="/login">Log In / Sign Up</a>
                    </div>
                    </li>
                    {{/if}}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    </div>
</header>
     <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Shop
                    <span></span> Wishlist
                </div>
            </div>
        </div>
        <section>
            {{#if messageWishlist}}
         <div style="text-align: center; font-weight:900" class="alert alert-danger">
            {{messageWishlist}}
        </div>
           {{/if}}
            {{#if msgAddtocart}}
         <div style="text-align: center; font-weight:900" class="alert alert-success">
            {{msgAddtocart}}
        </div>
        {{/if}}
        </section>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table class="table shopping-summery text-center">
                                <thead>
                                    <tr class="main-heading">
                                        <th scope="col">Image</th>
                                        <th scope="col">Product</th>
                                        <th scope="col">Price</th>
                                        <th scope="col">Stock Status</th>
                                        <th scope="col">Action</th>
                                        <th scope="col">Remove</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each wishlistData}}
                                    <tr>
                                        <td class="text-center">
                                            <img style="height: 70px; width:70px;" src="/images/cropped_{{this.img1}}">
                                        </td>
                                        <td  class="text-center">
                                            <h5 class="product-name"><a href="#">{{this.productName}}</a></h5>
                                        </td>
                                        <td style="text-align: center;" class="price" data-title="Price">
                                            <span>{{this.price}}.00</span>
                                        </td>
                                        {{#if (eq this.statusProduct "Out of stock")}}
                                        <td class="text-center" data-title="Stock">
                                            <span style="color: rgb(218, 7, 7); padding:3px; border-radius:6px; font-size:small" class="color3 font-weight-bold">{{this.statusProduct}}</span>
                                        </td>
                                        {{else}}
                                        <td class="text-center" data-title="Stock">
                                            <span style="color: blueviolet; padding:3px; border-radius:6px; font-size:small" class="color3 font-weight-bold">{{this.statusProduct}}</span>
                                        </td>
                                        {{/if}}
                                        <td class="text-center" data-title="Cart">
                                            <button  id="btn-wish"  onclick="wishlistaddTocart('{{this.product}}', '{{this.qty}}')" style="text-align: center; border-radius:6px; background-color:#000000; color:#ffffff;"><i
                                                    class="fi-rs-shopping-bag mr-5"></i>Add to cart</button>
                                        </td>
                                        <td style="text-align: center;" class="action" data-title="Remove">
                                            <a onclick="DeleteProduct('{{this.product}}')" href="#"><i style="font-size: large;" class="fi-rs-trash"></i></a>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>

                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
  <script>
    function logoutConfirmation() {
      Swal.fire({
        title: 'Are you sure?',
        text: "You will be logged out!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, log out!'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire(
            'Logged out!',
            'You have been logged out.',
            'success'
          ).then(() => {
            window.location.href = "/userLogout";
          });
        } else {
          window.location.href = "/userHome";
        }
      });
    }
  </script>

  <script>
    function wishlistaddTocart(productId , qty){
        
      window.location.href = `/wishlistAddtocart?productId=${productId}&qty=${qty}`;
    }
  </script>

<script>
    function DeleteProduct(productId){
        Swal.fire({
            title: 'Are you sure?',
            text: "It will be removed!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, Delete!'
        }).then((result) => {
            if (result.isConfirmed) {
                fetch(`/deleteWishlist?productId=${productId}`, {
                    method: 'DELETE',
                })
                .then(response => {
                    if (response.ok) {
                        Swal.fire(
                            'Deleted!',
                            'Your item has been removed.',
                            'success'
                        ).then(() => {
                            window.location.reload();
                        });
                    } else {
                        Swal.fire(
                            'Error!',
                            'There was a problem removing your item.',
                            'error'
                        );
                    }
                })
                .catch(error => {
                    Swal.fire(
                        'Error!',
                        'There was a problem removing your item.',
                        'error'
                    );
                });
            }
        });
    }
</script>

