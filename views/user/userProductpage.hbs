<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800');

        .nav {
            width: 100%;
            background-color: #ffffff;
            display: flex;
            align-items: center;
            position: relative;
            /* Ensure it's on top */
            z-index: 1000;
        }

        .nav>.nav-header {
            flex: 0.95;
            padding-left: 1rem;
        }

        .nav>.nav-header>.nav-title {
            font-size: 22px;
            color: #000000;
            /* Black text */
            font-weight: 900;
        }

        .nav>.nav-list {
            display: flex;
            gap: 2rem;
        }

        .nav>.nav-list>li {
            list-style-type: none;
        }

        .nav>.nav-list>li a {
            text-decoration: none;
            color: #000000;
            /* Black text */
            cursor: pointer;
            font-weight: 900;
        }

        .nav>#nav-check {
            display: none;
        }

        @media (max-width: 768px) {
            .nav>#nav-check {
                display: block;
                /* Show the menu icon */
            }

            .nav>#nav-check:checked+.nav-list {
                display: block;
                /* Display the menu items when checked */
            }

            /* Change the icon color to black */
            .nav>#nav-check+.nav-list .icon {
                color: #000000;
                /* Black icon color */
                font-weight: 900;
            }
            
        }

        @media (max-width: 576px){

            #btm-img{
                margin-top: 40%;
            }
        }

    </style>
</head>
<nav class="nav">
    <input type="checkbox" id="nav-check">
    <div class="nav-header">
        <div class="nav-title">
             {{#if this.userLogged}}
            <button onclick="homePage()" style="background-color: #fff; border:0;"> Home</button>
            {{else}}
             <button onclick="landingPage()" style="background-color: #fff; border:0;"> Home</button>
             {{/if}}
        </div>
    </div>
    <div class="nav-btn">
        <label for="nav-check">

        </label>
    </div>

    <ul class="nav-list">
        <li><a href="/wishlistPage">
                <i class="fa-regular fa-heart"></i></a></li>
        <li><a href="/cart">
                <i class="fa-solid fa-bag-shopping"></i></a></li>
        <li><a href="/userProductlist">Shop</a></li>
        <li><a href="/userAccount">Account</a></li>
        {{#if this.userLogged}}
        <li><a onclick="logoutConfirmation()">Logout</a></li>
        {{else}}
        <li><a href="/login">Login/Signup</a></li>
        {{/if}}
    </ul>
</nav>
<section>
    {{#if addTowishlistMsg}}
    <div style="text-align: center; font-weight:900" class="alert alert-success">
        {{addTowishlistMsg}}
    </div>
    {{/if}}
    {{#if successMessage}}
    <div style="text-align: center; font-weight:900" class="alert alert-success">
        {{successMessage}}
    </div>
    {{/if}}
    {{#if addTocartError}}
    <div style="text-align: center; font-weight:900" class="alert alert-danger">
        {{addTocartError}}
    </div>
    {{/if}}

</section>
    <main class="main">
 
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product-detail accordion-detail">
                            <div class="row mb-50">
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-gallery">
                                        <span class="zoom-icon"><i class="fi-rs-search"></i></span>
                                        <!-- MAIN SLIDES -->
                                        <div style="height: 600px;" class="product-image-slider">
                                            <figure class="border-radius-10">
                                               <img style="height: 700px; width:600px" src="/images/{{productData.img1}}"
                                                alt="product image">
                                            </figure>
                                            <figure class="border-radius-10">
                                                <img style="height: 700px; width:600px" src="/images/{{productData.img2}}"
                                                alt="product image">
                                            </figure>
                                            <figure class="border-radius-10">
                                               <img style="height: 700px; width:600px" src="/images/{{productData.img3}}"
                                                alt="product image">
                                            </figure>
                                        </div>
                                        <!-- THUMBNAILS -->
                                        <div style="margin-top: 20%;" id="btm-img" class="slider-nav-thumbnails pl-15 pr-15">
                                          <div><img style="height: 130px; width:150px" src="/images/{{productData.img1}}"
                                            alt="product image"></div>
                                    <div><img style="height: 130px; width:150px" src="/images/{{productData.img2}}"
                                            alt="product image"></div>
                                    <div><img style="height: 130px; width:150px" src="/images/{{productData.img3}}"
                                            alt="product image"></div>
                                        </div>
                                    </div>
                                    <!-- End Gallery -->
                                </div>
                                <div class="col-md-6 col-sm-12 col-xs-12">
                                    <div class="detail-info">
                                        <h2 class="title-detail">{{productData.productName}}</h2>
                                        <div class="product-detail-rating">
                                            <div class="pro-details-brand">
                                                <span> Brands: <a href="#">{{productData.brand}}</a></span>
                                            </div>
                                            <div class="product-rate-cover text-end">
                                               
                                                {{#if productData.update}}
                                        <span id="outOfstock-page" class="sale">{{productData.status}}</span>
                                        {{else}}
                                        <span id="inStock-page" class="sale">{{productData.status}}</span>
                                        {{/if}}
                                            </div>
                                             <div class="product-extra-link2">
                                            <a aria-label="Add To Wishlist" class="action-btn hover-up" href="/addTowishlist/{{productData._id}}"><i
                                                    class="fi-rs-heart"></i></a>
                                            <a aria-label="Compare" class="action-btn hover-up"
                                                href="#"><i class="fi-rs-shuffle"></i></a>
                                        </div>
                                        </div>
                                        <div class="clearfix product-price-cover">
                                            <div class="product-price primary-color float-left">
                                                <ins><span class="text-brand">{{productData.price}}.00</span></ins>
                                                <ins><span class="old-price font-md ml-15">{{productData.oldPrice}}.00</span></ins>
                                                <span class="save-price  font-md color3 ml-15">{{productData.offer}} Off</span>
                                            </div>
                                        </div>
                                        <div class="bt-1 border-color-1 mt-15 mb-15"></div>
                                            <p id="few-left">Only <span style="color: red;">{{productData.Qty}}</span>
                                                left in stock</p>
                                        <div class="product_sort_info font-xs mb-30">
                                            <ul>
                                                <li class="mb-10"><i class="fi-rs-crown mr-5"></i> 100% Original Products</li>
                                                <li class="mb-10"><i class="fi-rs-refresh mr-5"></i> Keep fresh</li>
                                                <li><i class="fi-rs-credit-card mr-5"></i> Cash on Delivery available</li>
                                            </ul>
                                        </div>
                                       <div class="detail-extralink">
                                        <div class="row">
                                            <div id="increment" class="row">
                                                <button id="qty-down" onclick="decreaseQuantity()">
                                                    <h6 id="icon-decrement">-</h6>
                                                </button>
                                                <span id="qty-val">1</span>
                                                <button id="qty-up" onclick="increaseQuantity()">
                                                    <h6 id="icon-decrement">+</h6>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                      
                                        <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                        <div class="detail-extralink">
                                        
                                              <input type="hidden" id="selected-size" name="selectedSize">
                                    <input type="hidden" id="selected-quantity" name="selectedQuantity">
                                    <div class="product-extra-link2">
                                        <button id="btn-cart" type="submit" class="button button-add-to-cart">
                                            <p class="add-to-bag">ADD TO BAG</p>
                                        </button>
                                       

                                    </div>
                                    
                                    <div class="delivery-check">
                                        <input style="width: 50%;" type="text" placeholder="Enter your postal code">
                                        <button  style="background-color: #000000; width:40%;" id="btn-postal"
                                            onclick="checkDelivery()">Check Delivery</button>
                                    </div>
                                        </div>
                                        <ul class="product-meta font-xs color-grey mt-50">
                                            <li class="mb-5">Features <a href="#">{{productData.tags}}</a></li>
                                           
                                        </ul>
                                    </div>
                                    <!-- Detail Info -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-10 m-auto entry-main-content">
                                    <h2 class="section-title style-1 mb-30">Description</h2>
                                    <div class="description mb-50">
                                        <p>{{productData.description}}</p>
                                      
                                     
                                        <hr class="wp-block-separator is-style-dots">
                                       
                                        <h4 class="mt-30">Packaging & Delivery</h4>
                                        <hr class="wp-block-separator is-style-wide">
                                        <p>{{productData.deliveryInfo}}
                                         </p>
                                    </div>
                                    <h3 class="section-title style-1 mb-30">Additional info</h3>
                                    <table class="font-md mb-30">
                                        <tbody>
                                            <tr class="stand-up">
                                                <th>How to use</th>
                                                <td>
                                                    <p>{{productData.howTouse}}</p>
                                                </td>
                                            </tr>
                                            <tr class="folded-wo-wheels">
                                                <th>Ideal For</th>
                                                <td>
                                                    <p>{{productData.IdealFor}}</p>
                                                </td>
                                            </tr>
                                            <tr class="folded-w-wheels">
                                                <th>Ingredients</th>
                                                <td>
                                                    <p>{{productData.Ingredients}}</p>
                                                </td>
                                            </tr>
                                           
                                       
                                        </tbody>
                                    </table>
                                    <div class="social-icons single-share">
                                        <ul class="text-grey-5 d-inline-block">
                                            <li><strong class="mr-10">Share this:</strong></li>
                                            <li class="social-facebook"><a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a></li>
                                            <li class="social-twitter"> <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a></li>
                                            <li class="social-instagram"><a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a></li>
                                            <li class="social-linkedin"><a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a></li>
                                        </ul>
                                    </div>
                              
                                </div>
                            </div>
                            <div class="row mt-60">
                                <div class="col-12">
                                    <h3 class="section-title style-1 mb-30">Related products</h3>
                                </div>
                                <div class="col-12">
                                     <div class="row related-products">
                                    {{#each relatedProducts}}
                                    <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                        <div class="product-cart-wrap small hover-up">
                                            <div class="product-img-action-wrap">
                                                <div class="product-img product-img-zoom">
                                                    <a href="shop-product-right.html" tabindex="0">
                                                        <img class="default-img" src="/images/{{this.img3}}" alt="">
                                                        <img class="hover-img" src="/images/{{this.img2}}" alt="">
                                                    </a>
                                                </div>
                                                <div class="product-action-1">
                                                    <a aria-label="Quick view" class="action-btn small hover-up" data-bs-toggle="modal"
                                                        data-bs-target="#quickViewModal "><i class="fi-rs-search"></i></a>
                                                    <a aria-label="Add To Wishlist" class="action-btn small hover-up" href="shop-wishlist.html"
                                                        tabindex="0"><i class="fi-rs-heart"></i></a>
                                                    <a aria-label="Compare" class="action-btn small hover-up" href="shop-compare.html"
                                                        tabindex="0"><i class="fi-rs-shuffle"></i></a>
                                                </div>
                                                <div class="product-badges product-badges-position product-badges-mrg">
                            
                            
                                                    {{#if this.update}}
                                                    <span style="background-color:#d00c0c;" id="outstock" class="sale">{{this.status}}</span>
                                                    {{else}}
                                                    <span style="background-color:#000000;" id="outstock" class="sale">{{this.status}}</span>
                            
                                                    {{/if}}
                            
                                                </div>
                                            </div>
                                            <div class="product-content-wrap">
                                                <div class="product-category">
                                                    <a href="shop-grid-right.html"></a>
                                                </div>
                                                <h2><a href="shop-product-right.html">{{this.productName}}</a></h2>
                                                <div class="rating-result" title="90%">
                                                    <span>
                                                        <span></span>
                                                    </span>
                                                </div>
                                                <div class="product-price">
                                                    <span><i class="fa-solid fa-indian-rupee-sign"></i>{{this.price}}.00</span>
                                                    <span class="old-price">{{this.offer}}</span>
                                                </div>
                                                <div class="product-action-1 show">
                                                    <a aria-label="Add To Cart" class="action-btn hover-up" href="shop-cart.html"><i
                                                            class="fi-rs-shopping-bag-add"></i></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {{/each}}
                                </div>
                                </div>
                            </div>
           
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
<footer class="main">
    <section class="section-padding footer-mid">
        <div class="container pt-15 pb-20">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="widget-about font-md mb-md-5 mb-lg-0">
                        <div class="logo logo-width-1 wow fadeIn animated">
                            <a href="/userHome"><img style="width: 100px; height:90px;"
                                    src="Logo/5313c5dfeae341de827bdfebb4154726.png" alt="logo"></a>
                        </div>
                        <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                        <p class="wow fadeIn animated">
                            <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                        </p>
                        <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                        <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                            <a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                            <a href="#"><img src="assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3">
                    <h5 class="widget-title wow fadeIn animated">About</h5>
                    <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Delivery Information</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms &amp; Conditions</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Support Center</a></li>
                    </ul>
                </div>
                <div class="col-lg-2  col-md-3">
                    <h5 class="widget-title wow fadeIn animated">My Account</h5>
                    <ul class="footer-list wow fadeIn animated">
                        <li><a href="/signUp">Sign In</a></li>
                        <li><a href="#">View Cart</a></li>
                        <li><a href="#">My Wishlist</a></li>
                        <li><a href="#">Track My Order</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Order</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5 class="widget-title wow fadeIn animated">Install App</h5>
                    <div class="row">
                        <div class="col-md-8 col-lg-12">
                            <p class="wow fadeIn animated">From App Store or Google Play</p>
                            <div class="download-app wow fadeIn animated">
                                <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active"
                                        src="assets/imgs/theme/app-store.jpg" alt=""></a>
                                <a href="#" class="hover-up"><img src="assets/imgs/theme/google-play.jpg" alt=""></a>
                            </div>
                        </div>
                        <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                            <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                            <img class="wow fadeIn animated" src="assets/imgs/theme/payment-method.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container pb-20 wow fadeIn animated">
        <div class="row">
            <div class="col-12 mb-20">
                <div class="footer-bottom"></div>
            </div>
            <div class="col-lg-6">
                <p class="float-md-left font-sm text-muted mb-0">&copy; 2024, <strong class="text-brand">EzpanoWhiff</strong>
                   Pvt Ltd </p>
            </div>
            <div class="col-lg-6">
                <p class="text-lg-end text-start font-sm text-muted mb-0">
                    Designed by <a href="http://alithemes.com" target="_blank">Mohammed salih v</a>. All rights reserved
                </p>
            </div>
        </div>
    </div>
</footer>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
    // Assuming availableQuantity is correctly set to 8
    function setSize(size) {
        // Set the selected size in the hidden input field
        document.getElementById('selected-size').value = size;
    }

    function increaseQuantity() {
    let qtyElement = document.getElementById('qty-val');
    let currentQuantity = parseInt(qtyElement.textContent);
    let availableStock = parseInt("{{ productData.Qty }}"); // Assuming CountOfstock is correctly set

    // Check if the current quantity is less than the available stock
    if (currentQuantity < availableStock) {
        // Increase the quantity and update the hidden input field
        qtyElement.textContent = currentQuantity + 1;
        document.getElementById('selected-quantity').value = currentQuantity + 1;
    } else {
          Swal.fire({
                    text: 'Sorry, the maximum available quantity has been reached.',
                    position: 'top',
                    timer: 3000,
                    background: 'red',
                    color: 'white',
                    showConfirmButton: false
                });
         return;
      
    }
}

    function decreaseQuantity() {
        let qtyElement = document.getElementById('qty-val');
        let currentQuantity = parseInt(qtyElement.textContent);

        // Ensure quantity doesn't go below 1
        if (currentQuantity > 1) {
            // Decrease the quantity and update the hidden input field
            qtyElement.textContent = currentQuantity - 1;
            document.getElementById('selected-quantity').value = currentQuantity - 1;
        }
    }

    function checkDelivery() {
        var postalCode = document.querySelector('.delivery-check input[type="text"]').value;
        // Perform delivery check based on the postal code
        // Example: alert("Delivery options for postal code " + postalCode);
    }


    function logoutConfirmation() {
        var confirmLogout = confirm("Are you sure you want to logout?");
        if (confirmLogout) {
            // If user confirms logout, redirect to /userLogout
            window.location.href = "/userLogout";
        } else {
            window.location.href = "/userHome";

        }
    }


    const addTocart = document.getElementById('btn-cart');
    const productId = "{{ productData._id }}"; // Assuming productData._id is a string

    addTocart.addEventListener('click', () => {
        // Retrieve selected quantity and size from hidden input fields
        const selectedQuantity = document.getElementById('selected-quantity').value;
        const selectedSize = document.getElementById('selected-size').value;

        // Redirect to the add-to-cart endpoint with product ID, quantity, and size as query parameters
        window.location.href = `/user/addTocart?id=${productId}&quantity=${selectedQuantity}&size=${selectedSize}`;
    });



</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>

function landingPage(){
    window.location.href = '/'
}


function logoutConfirmation() {
    Swal.fire({
        title: 'Are you sure?',
        text: "You will be logged out!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, log out!'
    }).then((result) => {
        if (result.isConfirmed) {
            Swal.fire(
                'Logged out!',
                'You have been logged out.',
                'success'
            ).then(() => {
                window.location.href = "/userLogout";
            });
        }
    });
}

      function homePage(){
            window.location.href = '/userHome'
        }
</script>











    <!-- Vendor JS-->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="assets/js/plugins/slick.js"></script>
    <script src="assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="assets/js/plugins/wow.js"></script>
    <script src="assets/js/plugins/jquery-ui.js"></script>
    <script src="assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="assets/js/plugins/magnific-popup.js"></script>
    <script src="assets/js/plugins/select2.min.js"></script>
    <script src="assets/js/plugins/waypoints.js"></script>
    <script src="assets/js/plugins/counterup.js"></script>
    <script src="assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="assets/js/plugins/images-loaded.js"></script>
    <script src="assets/js/plugins/isotope.js"></script>
    <script src="assets/js/plugins/scrollup.js"></script>
    <script src="assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="assets/js/plugins/jquery.theia.sticky.js"></script>
    <script src="assets/js/plugins/jquery.elevatezoom.js"></script>
    <!-- Template  JS -->
    <script src="./assets/js/main.js?v=3.4"></script>
    <script src="./assets/js/shop.js?v=3.4"></script>








</body>  
</html>