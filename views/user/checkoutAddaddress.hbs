<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wallet Page</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800');

    .nav {
      width: 100%;
      background-color: #ffffff;
      display: flex;
      align-items: center;
      position: relative;
      /* Ensure it's on top */
      z-index: 1000;
    }

    .nav>.nav-header {
      flex: 0.95;
      padding-left: 1rem;
    }

    .nav>.nav-header>.nav-title {
      font-size: 22px;
      color: #000000;
      /* Black text */
      font-weight: 900;
    }

    .nav>.nav-list {
      display: flex;
      gap: 2rem;
    }

    .nav>.nav-list>li {
      list-style-type: none;
    }

    .nav>.nav-list>li a {
      text-decoration: none;
      color: #000000;
      /* Black text */
      cursor: pointer;
      font-weight: 900;
    }

    .nav>#nav-check {
      display: none;
    }

    @media (max-width: 768px) {
      .nav>#nav-check {
        display: block;
        /* Show the menu icon */
      }

      .nav>#nav-check:checked+.nav-list {
        display: block;
        /* Display the menu items when checked */
      }

      /* Change the icon color to black */
      .nav>#nav-check+.nav-list .icon {
        color: #000000;
        /* Black icon color */
        font-weight: 900;
      }
    }
  </style>
</head>
<nav class="nav">
  <input type="checkbox" id="nav-check">
  <div class="nav-header">
    <div class="nav-title">
      <button onclick="homePage()" style="background-color: #fff; border:0;"> Home</button>
    </div>
  </div>
  <div class="nav-btn">
    <label for="nav-check">

    </label>
  </div>

  <ul class="nav-list">
    <li><a href="/wishlistPage">
        <i class="fa-regular fa-heart"></i></a></li>
    <li><a href="/cart">
        <i class="fa-solid fa-bag-shopping"></i></a></li>
    <li><a href="/userProductlist">Shop</a></li>
    <li><a href="/userAccount">Account</a></li>
    {{#if this.userLogged}}
    <li><a onclick="logoutConfirmation()">Logout</a></li>
    {{else}}
    <li><a href="/login">Login/Signup</a></li>
    {{/if}}
  </ul>
</nav>
<div class="container mt-4 mb-4">
  <h5 class="mb-4 mt-4">Add Address </h5>
  <div class="row">
    <form id="address-form" class="col s12">
      <div class="row">
        <div class="input-field col s12 m12 l6">
          <input name="fullname" id="fullname" type="text" required title="Please enter a valid name">
          <label for="fullname">Full name</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="phone" id="phone" type="text" required title="Please enter a valid phone number">
          <label for="phone">Phone</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="email" id="email" type="email" required title="Please enter a valid email">
          <label for="email">Email</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m12 l6">
          <input name="addressLine" id="addressLine" type="text" required title="Please enter a valid address">
          <label for="addressLine">Address</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="street" id="street" type="text" required title="Please enter a valid street">
          <label for="street">Street</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="City" id="City" type="text" required title="Please enter a valid city/town">
          <label for="City">City/Town</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s12 m12 l6">
          <input name="state" id="state" type="text" required title="Please enter a valid state">
          <label for="state">State</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="country" id="country" type="text" required title="Please enter a valid country">
          <label for="country">Country</label>
        </div>
        <div class="input-field col s12 m12 l6">
          <input name="pincode" id="pincode" type="number" required title="Please enter a valid zip code">
          <label for="pincode">Zip code</label>
        </div>
      </div>

      <button style="padding-bottom: 35px;" id="btn-address" class="waves-effect waves-light btn right"
        type="submit">Submit</button>
    </form>
  </div>
  <footer class="main">
    <section class="section-padding footer-mid">
      <div class="container pt-15 pb-20">
        <div class="row">
          <div class="col-lg-4 col-md-6">
            <div class="widget-about font-md mb-md-5 mb-lg-0">
              <div class="logo logo-width-1 wow fadeIn animated">
                <a href="/userHome"><img style="width: 100px; height:90px;"
                    src="Logo/5313c5dfeae341de827bdfebb4154726.png" alt="logo"></a>
              </div>
              <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
              <p class="wow fadeIn animated">
                <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
              </p>
              <p class="wow fadeIn animated">
                <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
              </p>
              <p class="wow fadeIn animated">
                <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
              </p>
              <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
              <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                <a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                <a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                <a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                <a href="#"><img src="assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-md-3">
            <h5 class="widget-title wow fadeIn animated">About</h5>
            <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Delivery Information</a></li>
              <li><a href="#">Privacy Policy</a></li>
              <li><a href="#">Terms &amp; Conditions</a></li>
              <li><a href="#">Contact Us</a></li>
              <li><a href="#">Support Center</a></li>
            </ul>
          </div>
          <div class="col-lg-2  col-md-3">
            <h5 class="widget-title wow fadeIn animated">My Account</h5>
            <ul class="footer-list wow fadeIn animated">
              <li><a href="/signUp">Sign In</a></li>
              <li><a href="#">View Cart</a></li>
              <li><a href="#">My Wishlist</a></li>
              <li><a href="#">Track My Order</a></li>
              <li><a href="#">Help</a></li>
              <li><a href="#">Order</a></li>
            </ul>
          </div>
          <div class="col-lg-4">
            <h5 class="widget-title wow fadeIn animated">Install App</h5>
            <div class="row">
              <div class="col-md-8 col-lg-12">
                <p class="wow fadeIn animated">From App Store or Google Play</p>
                <div class="download-app wow fadeIn animated">
                  <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active" src="assets/imgs/theme/app-store.jpg"
                      alt=""></a>
                  <a href="#" class="hover-up"><img src="assets/imgs/theme/google-play.jpg" alt=""></a>
                </div>
              </div>
              <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                <img class="wow fadeIn animated" src="assets/imgs/theme/payment-method.png" alt="">
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div class="container pb-20 wow fadeIn animated">
      <div class="row">
        <div class="col-12 mb-20">
          <div class="footer-bottom"></div>
        </div>
        <div class="col-lg-6">
          <p class="float-md-left font-sm text-muted mb-0">&copy; 2024, <strong class="text-brand">EzpanoWhiff</strong>
            Pvt Ltd </p>
        </div>
        <div class="col-lg-6">
          <p class="text-lg-end text-start font-sm text-muted mb-0">
            Designed by <a href="http://alithemes.com" target="_blank">Mohammed salih v</a>. All rights reserved
          </p>
        </div>
      </div>
    </div>
  </footer>
  <script>

    function homePage() {
      window.location.href = '/userHome'
    }


    function logoutConfirmation() {
      Swal.fire({
        title: 'Are you sure?',
        text: "You will be logged out!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, log out!'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire(
            'Logged out!',
            'You have been logged out.',
            'success'
          ).then(() => {
            window.location.href = "/userLogout";
          });
        }
      });
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('address-form');

      form.addEventListener('submit', function (event) {
        event.preventDefault();

        // Enhanced form validation
        const formData = new FormData(form);
        let isValid = true;
        let errorMessage = '';

        formData.forEach((value, key) => {
          const trimmedValue = value.trim();
          if (!trimmedValue) {
            isValid = false;
            errorMessage = `The field "${key}" cannot be empty or whitespace.`;
          }
          form[key].value = trimmedValue; // Trim the value in the form
        });

        if (!isValid) {
          Swal.fire({
            icon: 'error',
            title: 'Validation Error',
            text: errorMessage
          });
          return;
        }

        // Gather form data into an object
        const data = {};
        formData.forEach((value, key) => {
          data[key] = value.trim(); // Ensure values are trimmed
        });

        // Submit form data using Fetch API
        fetch('/checkout/newaddressAdding', { // Update the URL to your endpoint
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data)
        })
          .then(response => {
            if (response.ok) {
              return response.json();
            } else {
              console.log()
              throw new Error('Network response was not ok.');
            }
          })
          .then(responseData => {
            if (responseData.redirect) {
              Swal.fire({
                icon: 'success',
                title: 'Success',
                text: 'Your address has been submitted successfully!'
              }).then(() => {
                window.location.href = responseData.redirect;
              });
            }
          })
          .catch(error => {
            Swal.fire({
              icon: 'error',
              title: 'Submission Error',
              text: `There was an error submitting your address: ${error.message}`
            });
          });
      });
    });

  </script>
  </body>

</html>




